
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScaleVest Startup - Configuration</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0a0e27;
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Animated Space Background */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            min-height: 100vh;
            position: relative;
            z-index: 1;
        }

        /* Step Progress Bar */
        .step-progress {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 60px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .step-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            position: relative;
        }

        .step-item:not(:last-child)::after {
            content: '';
            position: absolute;
            top: 20px;
            left: 60%;
            width: 80%;
            height: 2px;
            background: rgba(255, 255, 255, 0.1);
            z-index: 0;
        }

        .step-item.active:not(:last-child)::after {
            background: linear-gradient(90deg, #667eea 0%, rgba(102, 126, 234, 0.3) 100%);
        }

        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
            transition: all 0.3s ease;
        }

        .step-item.active .step-number {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
        }

        .step-item.completed .step-number {
            background: #10b981;
            border-color: #10b981;
        }

        .step-label {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.5);
            text-align: center;
            font-weight: 500;
        }

        .step-item.active .step-label {
            color: #fff;
        }

        /* Welcome Screen */
        .welcome-screen {
            text-align: center;
            animation: fadeIn 1s ease-in;
            padding: 60px 20px;
        }

        .logo {
            font-size: 64px;
            font-weight: 700;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 40px rgba(102, 126, 234, 0.3);
        }

        .welcome-text {
            font-size: 42px;
            margin-bottom: 20px;
            font-weight: 300;
            letter-spacing: -1px;
        }

        .subtitle {
            font-size: 18px;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 80px;
            font-weight: 300;
        }

        .start-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            border: none;
            padding: 20px 70px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            border-radius: 50px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 2px;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
        }

        /* Form Screens */
        .form-screen {
            display: none;
            animation: slideIn 0.5s ease-out;
        }

        .form-screen.active {
            display: block;
        }

        .form-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 50px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .form-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .form-title {
            font-size: 36px;
            font-weight: 300;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #fff 0%, rgba(255, 255, 255, 0.6) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .form-subtitle {
            font-size: 16px;
            color: rgba(255, 255, 255, 0.5);
        }

        .form-group {
            margin-bottom: 30px;
        }

        .form-label {
            display: block;
            margin-bottom: 12px;
            font-size: 13px;
            color: rgba(255, 255, 255, 0.7);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 500;
        }

        .required {
            color: #f87171;
        }

        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.1);
            color: #fff;
            font-size: 16px;
            border-radius: 12px;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: #667eea;
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.2);
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }

        .form-select {
            cursor: pointer;
        }

        .form-select option {
            background: #1a1f3a;
            color: #fff;
        }

        /* Co-founders Section */
        .cofounder-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 20px;
            position: relative;
            transition: all 0.3s ease;
        }

        .cofounder-item:hover {
            border-color: rgba(102, 126, 234, 0.5);
            background: rgba(255, 255, 255, 0.08);
        }

        .cofounder-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .cofounder-title {
            font-size: 18px;
            font-weight: 600;
            color: #667eea;
        }

        .remove-btn {
            background: rgba(248, 113, 113, 0.2);
            color: #f87171;
            border: 1px solid rgba(248, 113, 113, 0.3);
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .remove-btn:hover {
            background: rgba(248, 113, 113, 0.3);
            border-color: #f87171;
        }

        .add-cofounder-btn {
            background: transparent;
            color: rgba(255, 255, 255, 0.7);
            border: 2px dashed rgba(255, 255, 255, 0.2);
            padding: 16px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            transition: all 0.3s ease;
            margin-bottom: 30px;
            font-weight: 500;
        }

        .add-cofounder-btn:hover {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
            color: #fff;
        }

        /* File Upload */
        .file-upload {
            position: relative;
        }

        .file-input {
            display: none;
        }

        .file-label {
            display: block;
            padding: 50px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px dashed rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-label:hover {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }

        .file-preview {
            margin-top: 20px;
            text-align: center;
        }

        .file-preview img {
            max-width: 200px;
            max-height: 200px;
            border-radius: 12px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        /* Buttons */
        .form-actions {
            display: flex;
            gap: 20px;
            margin-top: 50px;
        }

        .btn {
            flex: 1;
            padding: 18px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(102, 126, 234, 0.6);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            border-color: rgba(255, 255, 255, 0.4);
            background: rgba(255, 255, 255, 0.1);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Completion Screen */
        .completion-screen {
            display: none;
            text-align: center;
            animation: fadeIn 1s ease-in;
            padding: 60px 20px;
        }

        .completion-screen.active {
            display: block;
        }

        .success-icon {
            font-size: 100px;
            margin-bottom: 40px;
            animation: scaleIn 0.5s ease-out;
        }

        @keyframes scaleIn {
            from {
                transform: scale(0);
            }
            to {
                transform: scale(1);
            }
        }

        .completion-title {
            font-size: 42px;
            font-weight: 300;
            margin-bottom: 20px;
        }

        .completion-text {
            font-size: 18px;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 60px;
        }

        /* Error Messages */
        .error-message {
            color: #f87171;
            font-size: 13px;
            margin-top: 8px;
            display: none;
        }

        .error-message.show {
            display: block;
        }

        /* Loading Spinner */
        .loading {
            display: none;
            text-align: center;
            padding: 40px;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(10, 14, 39, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 1000;
            min-width: 300px;
        }

        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .form-card {
                padding: 30px 20px;
            }

            .logo {
                font-size: 48px;
            }

            .welcome-text {
                font-size: 32px;
            }

            .form-title {
                font-size: 28px;
            }

            .form-actions {
                flex-direction: column;
            }

            .step-progress {
                padding: 20px;
            }

            .step-label {
                font-size: 10px;
            }

            .step-number {
                width: 35px;
                height: 35px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <!-- Animated Stars Background -->
    <div class="stars" id="stars"></div>

    <div class="container">
        <!-- Step Progress (Hidden on Welcome) -->
        <div class="step-progress" id="stepProgress" style="display: none;">
            <div class="step-item" id="step1">
                <div class="step-number">1</div>
                <div class="step-label">Founder Profile</div>
            </div>
            <div class="step-item" id="step2">
                <div class="step-number">2</div>
                <div class="step-label">Startup Details</div>
            </div>
            <div class="step-item" id="step3">
                <div class="step-number">3</div>
                <div class="step-label">Business Info</div>
            </div>
            <div class="step-item" id="step4">
                <div class="step-number">4</div>
                <div class="step-label">Complete</div>
            </div>
        </div>

        <!-- Welcome Screen -->
        <div class="welcome-screen active" id="welcomeScreen">
            <div class="logo">ScaleStartup</div>
            <h1 class="welcome-text">Welcome to Your Journey</h1>
            <p class="subtitle">Let's build something extraordinary together</p>
            <button class="start-btn" onclick="startConfiguration()">Get Started</button>
        </div>

        <!-- Step 1: Founder Details -->
        <div class="form-screen" id="founderScreen">
            <div class="form-card">
                <div class="form-header">
                    <h2 class="form-title">Founder Profile</h2>
                    <p class="form-subtitle">Tell us about yourself and your team</p>
                </div>

                <form id="founderForm">
                    <div class="form-group">
                        <label class="form-label">Location <span class="required">*</span></label>
                        <input type="text" class="form-input" id="location" placeholder="City, State, Country" required>
                        <div class="error-message" id="locationError">Location is required</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Languages You Speak <span class="required">*</span></label>
                        <input type="text" class="form-input" id="languages" placeholder="English, Hindi, etc." required>
                        <div class="error-message" id="languagesError">Languages are required</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Your Age <span class="required">*</span></label>
                        <input type="number" class="form-input" id="userAge" placeholder="25" required>
                        <div class="error-message" id="userAgeError">Age is required</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Graduation/Education <span class="required">*</span></label>
                        <input type="text" class="form-input" id="graduation" placeholder="B.Tech, MBA, etc." required>
                        <div class="error-message" id="graduationError">Education is required</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Awards & Recognition</label>
                        <textarea class="form-textarea" id="awards" placeholder="List any awards or recognition you've received"></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Experience in Field <span class="required">*</span></label>
                        <textarea class="form-textarea" id="experience" placeholder="Describe your relevant experience" required></textarea>
                        <div class="error-message" id="experienceError">Experience is required</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Co-Founders</label>
                        <div id="cofoundersContainer"></div>
                        <button type="button" class="add-cofounder-btn" onclick="addCofounder()">+ Add Co-Founder</button>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="goToWelcome()">Back</button>
                        <button type="button" class="btn btn-primary" onclick="saveFounderDetails()">Next Step</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Step 2: Startup Profile -->
        <div class="form-screen" id="startupScreen">
            <div class="form-card">
                <div class="form-header">
                    <h2 class="form-title">Startup Profile</h2>
                    <p class="form-subtitle">Tell us about your venture</p>
                </div>

                <form id="startupForm">
                    <div class="form-group">
                        <label class="form-label">Startup Name <span class="required">*</span></label>
                        <input type="text" class="form-input" id="startupName" placeholder="Enter your startup name" required>
                        <div class="error-message" id="startupNameError">Startup name is required</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Year of Establishment <span class="required">*</span></label>
                        <input type="number" class="form-input" id="yearEstablished" placeholder="2024" min="1900" max="2026" required>
                        <div class="error-message" id="yearError">Year is required</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Country <span class="required">*</span></label>
                        <input type="text" class="form-input" id="country" placeholder="e.g., India" required>
                        <div class="error-message" id="countryError">Country is required</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">State <span class="required">*</span></label>
                        <input type="text" class="form-input" id="state" placeholder="e.g., Maharashtra" required>
                        <div class="error-message" id="stateError">State is required</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">City <span class="required">*</span></label>
                        <input type="text" class="form-input" id="city" placeholder="e.g., Mumbai" required>
                        <div class="error-message" id="cityError">City is required</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Startup Logo</label>
                        <div class="file-upload">
                            <input type="file" class="file-input" id="logoInput" accept="image/*" onchange="previewLogo(event)">
                            <label for="logoInput" class="file-label">
                                <div style="font-size: 40px; margin-bottom: 15px;">üìÅ</div>
                                <div style="font-size: 16px;">Click to upload logo</div>
                                <div style="font-size: 12px; color: rgba(255,255,255,0.4); margin-top: 10px;">PNG, JPG up to 5MB</div>
                            </label>
                            <div class="file-preview" id="logoPreview"></div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Category <span class="required">*</span></label>
                        <select class="form-select" id="category" required>
                            <option value="">Select a category</option>
                            <option value="AgTech">AgTech (Agriculture Technology)</option>
                            <option value="AdTech">AdTech (Advertising Technology)</option>
                            <option value="AI/ML">AI/ML (Artificial Intelligence & Machine Learning)</option>
                            <option value="Aerospace">Aerospace (Space exploration and satellites)</option>
                            <option value="AutoTech">AutoTech (Automotive and autonomous driving)</option>
                            <option value="BioTech">BioTech (Biology-based innovation)</option>
                            <option value="Blockchain">Blockchain (Decentralized ledgers and crypto)</option>
                            <option value="B2B SaaS">B2B SaaS (Business-to-Business Software)</option>
                            <option value="CleanTech">CleanTech (Environmentally friendly tech)</option>
                            <option value="Cybersecurity">Cybersecurity (Data protection and safety)</option>
                            <option value="ClimateTech">ClimateTech (Addressing global warming)</option>
                            <option value="EdTech">EdTech (Education and online learning)</option>
                            <option value="E-commerce">E-commerce (Online retail)</option>
                            <option value="FinTech">FinTech (Financial services)</option>
                            <option value="FoodTech">FoodTech (Food production and delivery)</option>
                            <option value="GameTech">GameTech (Video games and engines)</option>
                            <option value="HealthTech">HealthTech (Hospital and medical systems)</option>
                            <option value="InsurTech">InsurTech (Insurance innovation)</option>
                            <option value="IoT">IoT (Internet of Things/connected devices)</option>
                            <option value="LegalTech">LegalTech (Automating law services)</option>
                            <option value="Logistics">Logistics (Supply chain and shipping)</option>
                            <option value="MarTech">MarTech (Marketing automation)</option>
                            <option value="MedTech">MedTech (Medical devices and hardware)</option>
                            <option value="PropTech">PropTech (Property and Real Estate)</option>
                            <option value="SaaS">SaaS (Software as a Service)</option>
                            <option value="SpaceTech">SpaceTech (Rocketry and satellite data)</option>
                            <option value="TravelTech">TravelTech (Booking and tourism)</option>
                            <option value="VR/AR">VR/AR (Virtual and Augmented Reality)</option>
                            <option value="Web3">Web3 (Decentralized internet)</option>
                            <option value="Other">Other</option>
                        </select>
                        <div class="error-message" id="categoryError">Category is required</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Startup Stage <span class="required">*</span></label>
                        <select class="form-select" id="stage" required>
                            <option value="">Select startup stage</option>
                            <option value="Idea">Idea</option>
                            <option value="Building">Building</option>
                            <option value="MVP">MVP</option>
                            <option value="Pre-Launch">Pre-Launch</option>
                            <option value="Growing">Growing</option>
                            <option value="Scale">Scale</option>
                        </select>
                        <div class="error-message" id="stageError">Stage is required</div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="goToFounder()">Back</button>
                        <button type="button" class="btn btn-primary" onclick="saveStartupProfile()">Next Step</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Step 3: Business Details -->
        <div class="form-screen" id="businessScreen">
            <div class="form-card">
                <div class="form-header">
                    <h2 class="form-title">Business Details</h2>
                    <p class="form-subtitle">Final step - tell us about your business metrics</p>
                </div>

                <form id="businessForm">
                    <div class="form-group">
                        <label class="form-label">Company Valuation (USD)</label>
                        <input type="number" class="form-input" id="valuation" placeholder="e.g., 1000000">
                    </div>

                    <div class="form-group">
                        <label class="form-label">What Does Your Company Do? <span class="required">*</span></label>
                        <textarea class="form-textarea" id="companyDescription" placeholder="Describe your product/service and value proposition" required></textarea>
                        <div class="error-message" id="descriptionError">Description is required</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Current Revenue (USD)</label>
                        <input type="number" class="form-input" id="revenue" placeholder="0">
                    </div>

                    <div class="form-group">
                        <label class="form-label">User Count</label>
                        <input type="number" class="form-input" id="userCount" placeholder="0">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Monetization Idea <span class="required">*</span></label>
                        <textarea class="form-textarea" id="monetization" placeholder="How do you plan to make money?" required></textarea>
                        <div class="error-message" id="monetizationError">Monetization idea is required</div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="goToStartup()">Back</button>
                        <button type="button" class="btn btn-primary" onclick="completeSetup()">Complete Setup</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Completion Screen -->
        <div class="completion-screen" id="completionScreen">
            <div class="success-icon">‚úì</div>
            <h2 class="completion-title">Your Startup Profile is Complete!</h2>
            <p class="completion-text">Ready to get started in ScaleStartup by creating your first vest?</p>
            <button class="start-btn" onclick="createFirstVest()">Create First Vest</button>
        </div>

        <!-- Loading -->
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p style="margin-top: 20px; color: #888;">Saving your information...</p>
        </div>
    </div>

    <!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>

    <script>
        // Create animated stars
        function createStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }
        }
        createStars();

        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyD6PdrKp2XLfRqjC587lMpdKTaWD4MBens",
            authDomain: "scalevest-163a0.firebaseapp.com",
            databaseURL: "https://scalevest-163a0-default-rtdb.firebaseio.com",
            projectId: "scalevest-163a0",
            storageBucket: "scalevest-163a0.firebasestorage.app",
            messagingSenderId: "938358950124",
            appId: "1:938358950124:web:043506aeaacea2a96bfdc9",
            measurementId: "G-QD3TWBZHR0"
        };

firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.database(); 
    const storage = firebase.storage();

        let currentUser = null;
        let cofoundersData = [];
        let logoFile = null;
        let isInitialLoad = true;

        auth.onAuthStateChanged((user) => {
            if (user) {
                currentUser = user;
                isInitialLoad = false;
                console.log("User verified:", user.uid);
            } else {
                if (!isInitialLoad) {
                    window.location.href = 'login2.html';
                } else {
                    console.log("Firebase is still initializing...");
                    isInitialLoad = false;
                }
            }
        });

        function updateStepProgress(stepNumber) {
            // Show step progress bar
            document.getElementById('stepProgress').style.display = 'flex';
            
            // Update step items
            for (let i = 1; i <= 4; i++) {
                const stepItem = document.getElementById(`step${i}`);
                if (i < stepNumber) {
                    stepItem.classList.add('completed');
                    stepItem.classList.remove('active');
                } else if (i === stepNumber) {
                    stepItem.classList.add('active');
                    stepItem.classList.remove('completed');
                } else {
                    stepItem.classList.remove('active', 'completed');
                }
            }
        }

        function startConfiguration() {
            document.getElementById('welcomeScreen').classList.remove('active');
            document.getElementById('founderScreen').classList.add('active');
            updateStepProgress(1);
        }

        function goToWelcome() {
            document.getElementById('founderScreen').classList.remove('active');
            document.getElementById('welcomeScreen').classList.add('active');
            document.getElementById('stepProgress').style.display = 'none';
        }

        function goToFounder() {
            document.getElementById('startupScreen').classList.remove('active');
            document.getElementById('founderScreen').classList.add('active');
            updateStepProgress(1);
        }

        function goToStartup() {
            document.getElementById('businessScreen').classList.remove('active');
            document.getElementById('startupScreen').classList.add('active');
            updateStepProgress(2);
        }

        // Co-founder Management
        function addCofounder() {
            const container = document.getElementById('cofoundersContainer');
            const index = cofoundersData.length;
            
            const cofounderDiv = document.createElement('div');
            cofounderDiv.className = 'cofounder-item';
            cofounderDiv.innerHTML = `
                <div class="cofounder-header">
                    <div class="cofounder-title">Co-Founder ${index + 1}</div>
                    <button type="button" class="remove-btn" onclick="removeCofounder(${index})">Remove</button>
                </div>
                <div class="form-group">
                    <label class="form-label">Name <span class="required">*</span></label>
                    <input type="text" class="form-input" id="cofounderName${index}" placeholder="Full Name" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Email <span class="required">*</span></label>
                    <input type="email" class="form-input" id="cofounderEmail${index}" placeholder="email@example.com" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Age <span class="required">*</span></label>
                    <input type="number" class="form-input" id="cofounderAge${index}" placeholder="25" required>
                </div>
            `;
            
            container.appendChild(cofounderDiv);
            cofoundersData.push({ index });
        }

        function removeCofounder(index) {
            cofoundersData = cofoundersData.filter(cf => cf.index !== index);
            renderCofounders();
        }

        function renderCofounders() {
            const container = document.getElementById('cofoundersContainer');
            container.innerHTML = '';
            cofoundersData.forEach((cf, idx) => {
                const cofounderDiv = document.createElement('div');
                cofounderDiv.className = 'cofounder-item';
                cofounderDiv.innerHTML = `
                    <div class="cofounder-header">
                        <div class="cofounder-title">Co-Founder ${idx + 1}</div>
                        <button type="button" class="remove-btn" onclick="removeCofounder(${cf.index})">Remove</button>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Name <span class="required">*</span></label>
                        <input type="text" class="form-input" id="cofounderName${cf.index}" placeholder="Full Name" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email <span class="required">*</span></label>
                        <input type="email" class="form-input" id="cofounderEmail${cf.index}" placeholder="email@example.com" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Age <span class="required">*</span></label>
                        <input type="number" class="form-input" id="cofounderAge${cf.index}" placeholder="25" required>
                    </div>
                `;
                container.appendChild(cofounderDiv);
            });
        }

        function previewLogo(event) {
            const file = event.target.files[0];
            if (file) {
                logoFile = file;
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById('logoPreview');
                    preview.innerHTML = `<img src="${e.target.result}" alt="Logo Preview">`;
                };
                reader.readAsDataURL(file);
            }
        }

        function validateFounderForm() {
            let isValid = true;
            const fields = ['location', 'languages', 'userAge', 'graduation', 'experience'];
            
            fields.forEach(field => {
                const input = document.getElementById(field);
                const error = document.getElementById(field + 'Error');
                
                if (input && error) {
                    if (!input.value.trim()) {
                        error.classList.add('show');
                        isValid = false;
                    } else {
                        error.classList.remove('show');
                    }
                }
            });

            return isValid;
        }

        function validateStartupForm() {
            let isValid = true;
            const fields = ['startupName', 'yearEstablished', 'country', 'state', 'city', 'category', 'stage'];
            
            fields.forEach(field => {
                const input = document.getElementById(field);
                const error = document.getElementById(field + 'Error');
                
                if (input && error) {
                    if (!input.value.trim()) {
                        error.classList.add('show');
                        isValid = false;
                    } else {
                        error.classList.remove('show');
                    }
                }
            });
            return isValid;
        }

        function validateBusinessForm() {
            let isValid = true;
            const fields = ['companyDescription', 'monetization'];
            
            fields.forEach(field => {
                const input = document.getElementById(field);
                const error = document.getElementById(field + 'Error');
                
                if (input && error) {
                    if (!input.value.trim()) {
                        error.classList.add('show');
                        isValid = false;
                    } else {
                        error.classList.remove('show');
                    }
                }
            });
            return isValid;
        }

       async function saveFounderDetails() {
        if (!validateFounderForm()) return;

        const cofounders = {}; // RTD works better with objects or indexed lists
        cofoundersData.forEach((cf, idx) => {
            const name = document.getElementById(`cofounderName${cf.index}`)?.value;
            const email = document.getElementById(`cofounderEmail${cf.index}`)?.value;
            const age = document.getElementById(`cofounderAge${cf.index}`)?.value;
            if (name) cofounders[`founder_${idx}`] = { name, email, age: parseInt(age) };
        });

        const founderData = {
            location: document.getElementById('location').value,
            languages: document.getElementById('languages').value,
            age: parseInt(document.getElementById('userAge').value),
            graduation: document.getElementById('graduation').value,
            awards: document.getElementById('awards').value,
            experience: document.getElementById('experience').value,
            cofounders: cofounders,
           createdAt: firebase.database.ServerValue.TIMESTAMP
        };

        try {
            document.getElementById('loading').style.display = 'block';
            
            // Saving to founderprofile/{uid}
            await db.ref('founderprofile/' + currentUser.uid).set(founderData);

            document.getElementById('loading').style.display = 'none';
            document.getElementById('founderScreen').classList.remove('active');
            document.getElementById('startupScreen').classList.add('active');
            updateStepProgress(2);
        } catch (error) {
            console.error('Error:', error);
            alert('Error saving: ' + error.message);
            document.getElementById('loading').style.display = 'none';
        }
    }

        async function saveStartupProfile() {
        if (!validateStartupForm()) return;
        document.getElementById('loading').style.display = 'block';

        try {
            let logoUrl = '';
            if (logoFile) {
                const storageRef = storage.ref(`startup-logos/${currentUser.uid}/${logoFile.name}`);
                const snapshot = await storageRef.put(logoFile);
                logoUrl = await snapshot.ref.getDownloadURL();
            }

            const startupData = {
                startupName: document.getElementById('startupName').value,
                yearEstablished: parseInt(document.getElementById('yearEstablished').value),
                location: {
                    country: document.getElementById('country').value,
                    state: document.getElementById('state').value,
                    city: document.getElementById('city').value
                },
                logo: logoUrl,
                category: document.getElementById('category').value,
                stage: document.getElementById('stage').value
            };

            // Using update() to merge data in RTD
            await db.ref('startupprofile/' + currentUser.uid).update(startupData);

            document.getElementById('loading').style.display = 'none';
            document.getElementById('startupScreen').classList.remove('active');
            document.getElementById('businessScreen').classList.add('active');
            updateStepProgress(3);
        } catch (error) {
            alert('Error: ' + error.message);
            document.getElementById('loading').style.display = 'none';
        }
    }

       async function completeSetup() {
        if (!validateBusinessForm()) return;
        document.getElementById('loading').style.display = 'block';

        try {
            const businessData = {
                valuation: parseFloat(document.getElementById('valuation').value) || 0,
                companyDescription: document.getElementById('companyDescription').value,
                revenue: parseFloat(document.getElementById('revenue').value) || 0,
                userCount: parseInt(document.getElementById('userCount').value) || 0,
                monetization: document.getElementById('monetization').value,
                setupCompleted: true,
                completedAt: firebase.database.ServerValue.TIMESTAMP
            };

            await db.ref('startupprofile/' + currentUser.uid).update(businessData);

            document.getElementById('loading').style.display = 'none';
            document.getElementById('businessScreen').classList.remove('active');
            document.getElementById('completionScreen').classList.add('active');
            updateStepProgress(4);
        } catch (error) {
            alert('Error: ' + error.message);
            document.getElementById('loading').style.display = 'none';
        }
    }

        function createFirstVest() {
            window.location.href = 'vests.html';
        }
    </script>
</body>
</html>
